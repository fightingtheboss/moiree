<div <%= "data-controller=refresh" if @edition.current? %>>
  <header class="p-4 text-left w-full">
    <div class="">
      <div>
        <h2 class="font-normal text-xs uppercase"><%= @edition.name %></h2>
        <h1 class="font-semibold text-2xl"><%= @edition.code %></h1>
        <p class="mt-1 text-sm">Ratings are out of 5.0</p>
        <% if @edition.current? %>
          <p class="mt-2 text-sm">This page will update automatically when new ratings are added</p>
        <% else %>
          <p class="mt-2 p-2 font-semibold text-center rounded bg-[repeating-linear-gradient(-45deg,#e0e7ff_0px,#e0e7ff_4px,#eef2ff_4px,#eef2ff_8px)]">This festival is not currently in progress, so this view won't update automatically</p>
        <% end %>
      </div>
    </div>
  </header>

  <ul class="mx-4 md:grid md:grid-cols-5 md:gap-2">
    <% @ratings.each do |rating| %>
      <li class="flex flex-col justify-between bg-white p-4 shadow-sm rounded-md mb-2">
        <div class="">
          <p class="text-xs text-slate-600 mb-1"><%= time_ago_in_words(rating.created_at).capitalize %> ago</p>
          <p class="text-sm"><strong><%= rating.critic.name %></strong> rated</p>
          <h4 class="mt-1.5 mb-3 text-lg leading-tight"><%= link_to rating.film.title, film_path(rating.film) %></h4>
        </div>
        <p class="text-center bg-indigo-50 rounded-sm px-2 py-1"><strong class="text-2xl"><%= display_rating(rating.score) %></strong></p>
      </li>
    <% end %>
  </ul>
</div>

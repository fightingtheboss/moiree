<li class="bg-white p-6 flex flex-col justify-between shadow-sm rounded hover:shadow-lg transition-shadow my-1 md:my-0">
  <article>
    <h2 class="text-xs uppercase tracking-wide font-light"><%= selection.film.categories.first.name %></h2>
    <h1 class="font-semibold my-2 leading-tight"><%= selection.film.title %></h1>
    <p class="text-sm my-0.5"><%= selection.film.director %></p>
    <p class="text-sm my-0.5"><%= selection.film.countries.join(", ") %></p>
    <p class="text-sm my-0.5"><%= selection.film.year %></p>
  </article>

  <aside id="<%= dom_id(selection) %>">
    <% unless critic_already_rated?(selection) || defined?(hide_rate_button) %>
      <%= link_to(
        "Rate",
        new_admin_festival_edition_selection_rating_path(@festival, @edition, selection),
        data: {
          turbo_frame: "modal",
          controller: "modal",
          action: "modal#show",
          "modal-dialog-param": "global-modal",
          "modal-target-param": dom_id(@edition, :films)
        },
        class: "mt-4 inline-block bg-indigo-500 hover:bg-indigo-700 text-white font-semibold py-1 px-2 rounded text-xs"
      ) %>
    <% end %>

    <% if critic_already_rated?(selection) %>
      <p class="px-2 py-1 bg-teal-500 text-white rounded mt-4 text-xs inline-block">Your rating: <strong><%= Current.user.userable.ratings.find_by(selection: selection).score %></strong></p>
      <%#= link_to(
        "View rating",
        admin_festival_edition_selection_rating_path(@festival, @edition, selection, Current.user.userable.ratings.find_by(selection: selection)),
        data: {
          turbo_frame: "modal",
          controller: "modal",
          action: "modal#show",
          "modal-dialog-param": "global-modal",
          "modal-target-param": dom_id(@edition, :films)
        },
        class: "mt-4 inline-block bg-indigo-500 hover:bg-indigo-700 text-white font-semibold py-1 px-2 rounded text-xs"
      ) %>
    <% end %>
  </aside>
</li>
